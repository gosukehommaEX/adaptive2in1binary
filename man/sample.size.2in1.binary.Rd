% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sample.size.2in1.binary.R
\name{sample.size.2in1.binary}
\alias{sample.size.2in1.binary}
\title{Sample Size Calculation for 2-in-1 Adaptive Design with Binary Endpoints}
\usage{
sample.size.2in1.binary(
  p1,
  p2,
  r,
  pi1,
  pi2,
  cutpoint,
  alpha2,
  alpha3,
  tar.power
)
}
\arguments{
\item{p1}{True probability of responders for group 1 (treatment group).}

\item{p2}{True probability of responders for group 2 (control group).}

\item{r}{Allocation ratio to group 1 (i.e., group 1:group 2 = r:1, r > 0).}

\item{pi1}{Allocation ratio of total sample size to stage 1.
N21 = ceiling(pi1 * N2) and N11 = ceiling(r * N21), where N2 is the
total sample size for group 2.}

\item{pi2}{Allocation ratio of total sample size to stage 2.
N22 = ceiling(pi2 * N2) and N12 = ceiling(r * N22).
Note: To control type I error rate, pi2 should be less than or equal to 1 - pi1.}

\item{cutpoint}{A cutpoint of the risk difference for the interim decision.
The value should be within -1 < cutpoint <= 1.}

\item{alpha2}{One-sided level of significance at satge 2 (e.g., 0.025).}

\item{alpha3}{One-sided level of significance at satge 3 (e.g., 0.025).}

\item{tar.power}{Target power (e.g., 0.8 or 0.9).}
}
\value{
A tibble with the following columns:
\itemize{
\item \code{p1}: True probability of responders for group 1
\item \code{p2}: True probability of responders for group 2
\item \code{r}: Allocation ratio
\item \code{pi1}: Allocation ratio to stage 1
\item \code{pi2}: Allocation ratio to stage 2
\item \code{alpha}: One-sided level of significance
\item \code{tar.power}: Target power
\item \code{Test}: Statistical testing approach
\item \code{cutpoint}: Cutpoint of the risk difference
\item \code{N1.trad}: Required sample size of group 1 for a traditional design
\item \code{N2.trad}: Required sample size of group 2 for a traditional design
\item \code{N.trad}: Required total sample size for a traditional design
\item \code{N1.2in1}: Required sample size of group 1 for a 2-in-1 design
\item \code{N2.2in1}: Required sample size of group 2 for a 2-in-1 design
\item \code{N.2in1}: Required total sample size for a 2-in-1 design
\item \code{ESS}: Expected sample size
\item \code{Go.prob}: Go probability of expanding to a Phase 3 trial
\item \code{Power.2}: Power of tests for Phase 2 part
\item \code{Power.3}: Power of tests for Phase 3 part
\item \code{Power.Total}: Total power of tests (sum of Power.2 and Power.3)
}
}
\description{
This function calculates the required sample size for a 2-in-1 adaptive
phase 2/3 design with binary endpoints to achieve a target power. The 2-in-1
adaptive design allows a trial to maintain a small trial or to expand to a
large trial adaptively based on decisions made at the interim analysis.
The function provides results for five types of one-sided statistical tests
and compares the required sample size with a traditional design.
}
\details{
The function implements the sample size calculation methodology described in
Homma and Yoshida (20XX) for 2-in-1 adaptive designs with binary endpoints.
The algorithm proceeds as follows:
\enumerate{
\item Calculate the required sample size for a traditional design (Phase 3 only)
using the \code{sample.size.binary} function
\item Set initial sample sizes for the 2-in-1 design based on the allocation
ratios pi1 and pi2
\item Iteratively increase the sample size until the calculated power meets
or exceeds the target power
}

The function returns comprehensive information including:
\itemize{
\item Required sample sizes for both traditional and 2-in-1 designs
\item Expected sample size (ESS)
\item Go probability
\item Power for Phase 2 part, Phase 3 part, and total power
}
}
\examples{
# Example 1: Basic usage
sample.size.2in1.binary(
  p1 = 0.4, p2 = 0.2, r = 2, pi1 = 0.2, pi2 = 0.5,
  cutpoint = 0.2, alpha2 = 0.025, alpha3 = 0.025, tar.power = 0.8
)

# Example 2: Balanced allocation
sample.size.2in1.binary(
  p1 = 0.6, p2 = 0.3, r = 1, pi1 = 0.3, pi2 = 0.3,
  cutpoint = 0.3, alpha2 = 0.025, alpha3 = 0.025, tar.power = 0.9
)

# Example 3: Compare different cutpoints
cutpoints <- c(0.15, 0.20, 0.25)
results <- lapply(cutpoints, function(c) {
  sample.size.2in1.binary(
    p1 = 0.5, p2 = 0.3, r = 1, pi1 = 0.2, pi2 = 0.3,
    cutpoint = c, alpha2 = 0.025, alpha3 = 0.025, tar.power = 0.8
  )
})
do.call(rbind, results)

# Example 4: High power requirement
sample.size.2in1.binary(
  p1 = 0.7, p2 = 0.3, r = 1, pi1 = 0.3, pi2 = 0.3,
  cutpoint = 0.5, alpha2 = 0.025, alpha3 = 0.025, tar.power = 0.9
)
}
\references{
Homma, G. and Yoshida, T. (20XX). A 2-in-1 adaptive design for binary endpoints.
}
